{"version":3,"file":"/index/index.js","mappings":"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","sources":["webpack://message-ai/./src/index/index.js"],"sourcesContent":["// Javascript for index page\r\n\r\n\r\n// ====== IMPORTS ======\r\n\r\nimport './index.css';\r\n\r\n\r\n// ====== FUNCTIONS ======\r\n\r\nfunction main () {\r\n    if (performance.getEntries()[0].type === \"back_forward\") {\r\n        location.reload();\r\n    }\r\n\r\n    addEventsListeners();\r\n}\r\n\r\nfunction addEventsListeners () {\r\n    addNewChatBtnListener();\r\n    addChatLinkListeners();\r\n    addInviteBtnListeners();\r\n}\r\n\r\nfunction addInviteBtnListeners () {\r\n    const acceptBtn = document.querySelector('.acceptInviteBtn');\r\n    if (acceptBtn) {   \r\n        acceptBtn.addEventListener('click', acceptBtnListener);\r\n    }\r\n\r\n    const ignoreBtn = document.querySelector('.ignoreInviteBtn');\r\n    if (ignoreBtn) {\r\n        ignoreBtn.addEventListener('click', ignoreBtnListener);\r\n    }\r\n}\r\n\r\nfunction acceptBtnListener () {\r\n\r\n}\r\n\r\nasync function ignoreBtnListener (event) {\r\n    const roomId = event.target.parentElement.parentElement.getAttribute('data-room-id');\r\n    const response = await fetch(`/ignore_invite/${roomId}`, {\r\n        method: 'DELETE'\r\n    });\r\n    const result = await response.json();\r\n    \r\n    if (result.success) {\r\n        // Find the dom article and start removal animation\r\n        const inviteArticle = findArticleByRoomId(roomId);\r\n        startRemoveArticleAnimation(inviteArticle);\r\n    }\r\n}\r\n\r\nfunction startRemoveArticleAnimation (article) {\r\n    article.addEventListener('animationend', removeArticleEndHandler);\r\n    article.classList.add('removing');\r\n}\r\n\r\nfunction removeArticleEndHandler (event) {\r\n    if (event.animationName === 'removing') {\r\n        event.target.remove();\r\n    }\r\n}\r\n\r\nfunction findArticleByRoomId (roomId) {\r\n    const inviteArticles = document.querySelectorAll('.invite.link');\r\n    let result = null;\r\n    if (inviteArticles) {\r\n        inviteArticles.forEach((inviteArticle) => {\r\n            if (inviteArticle.getAttribute('data-room-id') === roomId) {\r\n                result = inviteArticle;\r\n            }\r\n        });\r\n        return result;\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nfunction addChatLinkListeners () {\r\n    const chatLinks = document.querySelectorAll('.chat.active');\r\n    chatLinks.forEach((chatLink) => {\r\n        chatLink.addEventListener('click', chatLinkClickHandler);\r\n    });\r\n}\r\n\r\nfunction chatLinkClickHandler (event) {\r\n    window.location.href = `/chat/${event.target.getAttribute('data-room-id')}`;\r\n}\r\n\r\nfunction addNewChatBtnListener () {\r\n    const newChatBtn = document.querySelector('.newChatBtn');\r\n\r\n    newChatBtn.addEventListener('click', newChatButtonListener);\r\n\r\n    function newChatButtonListener () {\r\n        window.location.href = '/chat/start_chat';\r\n    }\r\n}\r\n\r\n// ====== MAIN ======\r\n\r\nmain();\r\n"],"names":["main","performance","getEntries","type","location","reload","addEventsListeners","addNewChatBtnListener","addChatLinkListeners","addInviteBtnListeners","acceptBtn","document","querySelector","addEventListener","acceptBtnListener","ignoreBtn","ignoreBtnListener","event","roomId","target","parentElement","getAttribute","response","fetch","method","result","json","success","inviteArticle","findArticleByRoomId","startRemoveArticleAnimation","article","removeArticleEndHandler","classList","add","animationName","remove","inviteArticles","querySelectorAll","forEach","chatLinks","chatLink","chatLinkClickHandler","window","href","newChatBtn","newChatButtonListener"],"sourceRoot":""}